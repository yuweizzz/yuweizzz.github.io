<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://yuweizzz.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/github.min.css' />
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/github-style.css' />
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/light.css' />
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/dark.css' />
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/syntax.css' />
    <title>常用 Linux 命令和 Shell 技巧记录 - Wei&#39;s blog</title>
    
    <link rel="icon" type="image/x-icon" href='/images/github.png'>
    
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="这篇文档用以记录一些 Linux 下常用命令和一些实用的 Shell 技巧。
" />
<meta name="keywords"
  content='blog, google analytics' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://yuweizzz.github.io/post/practical_tips_in_linux/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="常用 Linux 命令和 Shell 技巧记录 - Wei&#39;s blog" />
<meta name="twitter:description"
  content="这篇文档用以记录一些 Linux 下常用命令和一些实用的 Shell 技巧。
" />
<meta name="twitter:site" content="https://yuweizzz.github.io/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://yuweizzz.github.io/">


<meta property="og:type" content="article" />
<meta property="og:title" content="常用 Linux 命令和 Shell 技巧记录 - Wei&#39;s blog">
<meta property="og:description"
  content="这篇文档用以记录一些 Linux 下常用命令和一些实用的 Shell 技巧。
" />
<meta property="og:url" content="https://yuweizzz.github.io/post/practical_tips_in_linux/" />
<meta property="og:site_name" content="常用 Linux 命令和 Shell 技巧记录" />
<meta property="og:image"
  content="https://yuweizzz.github.io/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2021-07-03 15:00:00 &#43;0000 UTC" />










</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://yuweizzz.github.io/">
        <svg class="octicon" height="32" viewBox="0 0 16 16" version="1.1" width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd"
            d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:https://yuweizzz.github.io/">
            </label>
          </form>
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://yuweizzz.github.io/">
        <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
          width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>
  
<div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://yuweizzz.github.io/">
                  <img class=" avatar-user"
                    src="https://yuweizzz.github.io/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://yuweizzz.github.io/">Wei</a></span><span
                    class="path-divider">/</span><strong class="css-truncate-target mr-1" style="max-width: 410px"><a
                      href="https://yuweizzz.github.io/post/practical_tips_in_linux/">常用 Linux 命令和 Shell 技巧记录</a></strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Sat, 03 Jul 2021 15:00:00 &#43;0000"
                    class="no-wrap">
                    Sat, 03 Jul 2021 15:00:00 &#43;0000</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Mon, 26 Jul 2021 14:08:55 &#43;0000"
                    class="no-wrap">
                    Mon, 26 Jul 2021 14:08:55 &#43;0000</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div class="file-header d-flex flex-md-items-center flex-items-start">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    2488 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                    
                    <a class="muted-link mr-3" href="/tags/linux">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      Linux
                    </a>
                    
                    <a class="muted-link mr-3" href="/tags/shell">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      Shell
                    </a>
                    
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5">
                <article class="markdown-body entry-content container-lg"><p>这篇文档用以记录一些 Linux 下常用命令和一些实用的 Shell 技巧。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">
                                       <span class="o">(</span>@@<span class="o">)</span> <span class="o">(</span>  <span class="o">)</span> <span class="o">(</span>@<span class="o">)</span>  <span class="o">(</span> <span class="o">)</span>  @@    <span class="o">()</span>    @     O     @     O      @
                                  <span class="o">(</span>   <span class="o">)</span>
                              <span class="o">(</span>@@@@<span class="o">)</span>
                           <span class="o">(</span>    <span class="o">)</span>

                         <span class="o">(</span>@@@<span class="o">)</span>
                       <span class="o">====</span>        ________                ___________
                   _D _<span class="p">|</span>  <span class="p">|</span>_______/        <span class="se">\_</span>_I_I_____<span class="o">===</span>__<span class="p">|</span>_________<span class="p">|</span>
                    <span class="p">|</span><span class="o">(</span>_<span class="o">)</span>---  <span class="p">|</span>   H<span class="se">\_</span>_______/ <span class="p">|</span>   <span class="p">|</span>        <span class="o">=</span><span class="p">|</span>___ ___<span class="p">|</span>      _________________
                    /     <span class="p">|</span>  <span class="p">|</span>   H  <span class="p">|</span>  <span class="p">|</span>     <span class="p">|</span>   <span class="p">|</span>         <span class="o">||</span>_<span class="p">|</span> <span class="p">|</span>_<span class="o">||</span>     _<span class="p">|</span>                <span class="se">\_</span>____A
                   <span class="p">|</span>      <span class="p">|</span>  <span class="p">|</span>   H  <span class="p">|</span>__--------------------<span class="p">|</span> <span class="o">[</span>___<span class="o">]</span> <span class="p">|</span>   <span class="o">=</span><span class="p">|</span>                        <span class="p">|</span>
                   <span class="p">|</span> ________<span class="p">|</span>___H__/__<span class="p">|</span>_____/<span class="o">[][]</span>~<span class="se">\_</span>______<span class="p">|</span>       <span class="p">|</span>   -<span class="p">|</span>                        <span class="p">|</span>
                   <span class="p">|</span>/ <span class="p">|</span>   <span class="p">|</span>-----------I_____I <span class="o">[][]</span> <span class="o">[]</span>  D   <span class="p">|</span><span class="o">=======</span><span class="p">|</span>____<span class="p">|</span>________________________<span class="p">|</span>_
                 __/ <span class="o">=</span><span class="p">|</span> o <span class="p">|</span><span class="o">=</span>-~O<span class="o">=====</span><span class="nv">O</span><span class="o">=====</span><span class="nv">O</span><span class="o">=====</span>O<span class="se">\ </span>____Y___________<span class="p">|</span>__<span class="p">|</span>__________________________<span class="p">|</span>_
                  <span class="p">|</span>/-<span class="o">=</span><span class="p">|</span>___<span class="p">|</span><span class="o">=</span>    <span class="o">||</span>    <span class="o">||</span>    <span class="o">||</span>    <span class="p">|</span>_____/~<span class="se">\_</span>__/          <span class="p">|</span>_D__D__D_<span class="p">|</span>  <span class="p">|</span>_D__D__D_<span class="p">|</span>
                   <span class="se">\_</span>/      <span class="se">\_</span>_/  <span class="se">\_</span>_/  <span class="se">\_</span>_/  <span class="se">\_</span>_/      <span class="se">\_</span>/               <span class="se">\_</span>/   <span class="se">\_</span>/    <span class="se">\_</span>/   <span class="se">\_</span>/

</code></pre></div><h2 id="linux的归档和压缩命令">Linux的归档和压缩命令</h2>
<p>归档压缩是经常需要进行的操作，在 Linux 系统中基本上通过 tar 就可以应对大部分场景，某些特殊的场景可能会涉及 zip ， 7z ， rar 这些不同的压缩文件格式，它们需要使用额外的工具去操作，这里只介绍 tar 命令。</p>
<p>我们通常会使用 tar 对一系列文件进行归档打包，生成一个新的文件，但是新生成的打包文件我们可以自行决定是否压缩。所以归档打包和压缩不是同一概念，只是它们通常是紧密结合在一起的。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 归档实例：</span>

<span class="c1"># 打包目录</span>
tar -cvf output.tar /mydir
<span class="c1"># -c 代表创建打包文件</span>
<span class="c1"># -v 代表显示详细过程</span>
<span class="c1"># -f 命名生成的打包文件</span>
<span class="c1"># 这一般是打包文件的最小操作命令，将 /mydir 打包为 output.tar</span>

<span class="c1"># 打包文件并进行压缩</span>
tar -cvzpf output.tar.gz /mydir
tar -cvjpf output.tar.bz2 /mydir
tar -cvJpf output.tar.xz /mydir
<span class="c1"># -j 代表使用 bzip2 压缩</span>
<span class="c1"># -z 代表使用 gzip 压缩</span>
<span class="c1"># -J 代表使用 xz 进行压缩</span>
<span class="c1"># -p 代表使用原来的文件权限还原文件</span>
<span class="c1"># 这是带了压缩命令的打包文件，以上三种压缩格式都是比较常用的</span>
<span class="c1"># 命名可以任意，一般保持通用的命名规则</span>

<span class="c1"># 解包文件</span>
tar -xvf output.tar -C /mydir
<span class="c1"># -x 代表解压文件操作</span>
<span class="c1"># -f 代表进行操作的文件</span>
<span class="c1"># -C 用来指定解压的路径</span>
<span class="c1"># 这一般是解压文件的通用命令，可以不指定压缩格式，tar 会自动适配</span>

<span class="c1"># 指定的压缩格式解压文件</span>
tar -xvJf output.tar.xz -C /mydir
<span class="c1"># 可以指定对应的压缩格式</span>
</code></pre></div><h2 id="硬盘分区和格式化">硬盘分区和格式化</h2>
<p>硬盘需要进行分区和格式化之后才能使用，现阶段主流的硬盘分区方式是 GPT ，小容量的硬盘和系统盘还经常会使用 msdos 。常用的分区工具有 parted ， fdisk ， gdisk 这几个，文件系统格式化一般使用 mkfs 命令。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># fdisk 只能支持 msdos 分区</span>
<span class="c1"># gdisk 在 fdisk 的基础上扩展 gpt 的功能</span>
<span class="c1"># 推荐使用 parted ，它拥有更全面的功能</span>

<span class="c1"># 查看已有分区信息</span>
parted /dev/sda print     

<span class="c1"># 以下命令具有一定危险，需要注意数据安全</span>
<span class="c1"># 设置分区表格式</span>
parted /dev/sda mklabel <span class="o">[</span> gpt <span class="p">|</span> msdos <span class="o">]</span>

<span class="c1"># 新增分区</span>
parted /dev/sda mkpart <span class="o">[</span> primary <span class="p">|</span> extended <span class="p">|</span> logical <span class="o">]</span> <span class="o">[</span> ext4 <span class="p">|</span> xfs <span class="o">]</span> start end
<span class="c1"># gpt 一般只用到 primary 分区，msdos 需要额外用到 extended 和 logical 分区</span>
<span class="c1"># 文件系统的标记一般可以不写</span>
<span class="c1"># 分区范围是必填项</span>

<span class="c1"># 删除某一分区， Number 代表分区编号</span>
parted /dev/sda rm Number

<span class="c1"># 格式化分区</span>
mkfs.ext4 <span class="o">[</span>-b size<span class="o">]</span> <span class="o">[</span>-L label<span class="o">]</span> /dev/sda1
mkfs.xfs <span class="o">[</span>-b size<span class="o">]</span> <span class="o">[</span>-L label<span class="o">]</span> /dev/sda1
<span class="c1"># 两种最常用的文件系统，参数都是相近的</span>
<span class="c1"># -b 用来设定最小区块大小，有1K，2K，4K</span>
<span class="c1"># -L 用来设置文件系统标签，用于挂载文件系统</span>

<span class="c1"># 速用脚本</span>
parted /dev/sda -s mklabel gpt
parted /dev/sda -s mkpart primary <span class="m">0</span> 100%
<span class="c1"># -s 用来屏蔽 parted 的交互信息</span>
mkfs.xfs /dev/sda1
</code></pre></div><h2 id="curl的基本使用">curl的基本使用</h2>
<p>curl 在 Linux 代替了浏览器的工作，经常用来调试接口。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 经典curl用例</span>
curl -X POST -d <span class="s1">&#39;{&#34;key&#34;:&#34;value&#34;}&#39;</span> -H <span class="s1">&#39;Content-Type: application/json&#39;</span> http://....
<span class="c1"># -X HTTP请求方法，通常有GET,POST,PUT,DELETE</span>
<span class="c1"># -d body，常用于POST方法的请求体</span>
<span class="c1"># -H header，定义HTTP请求头</span>

<span class="c1"># 这里列举其他常用的参数</span>
<span class="c1"># -b 用来设置cookie，常以 -b &#39;key1=value1;key2=value2&#39; 的形式出现</span>
<span class="c1"># -k 用来跳过SSL验证，用于请求https协议</span>
<span class="c1"># -i 用来额外输出请求的响应头，响应体正常输出</span>
<span class="c1"># -I 使用这个参数后只输出请求的响应头，响应体不再输出</span>
</code></pre></div><h2 id="使用sed快速去除无用字符">使用sed快速去除无用字符</h2>
<p>sed 可以很简单快速去除空白行，首尾空白字符，注释行。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 删除空白行</span>
sed <span class="s1">&#39;/^$/d&#39;</span>

<span class="c1"># 删除行左边的空白字符</span>
sed <span class="s1">&#39;s/^[ \t]*//g&#39;</span>

<span class="c1"># 删除行右边的空白字符</span>
sed <span class="s1">&#39;s/[ \t]*$//g&#39;</span>

<span class="c1"># 删除注释行</span>
sed <span class="s1">&#39;/^#/d&#39;</span>
<span class="c1"># 可能要配合删除左侧空白字符使用</span>

<span class="c1"># 实现上述操作基于正则表达式：</span>
<span class="c1"># $ 代表行尾</span>
<span class="c1"># ^ 代表行首</span>
<span class="c1"># [] 整体代表一个字符，[] 里面是字符范围</span>
<span class="c1"># 在上面的操作中，[ \t] 用来匹配 &#39; &#39; 或 &#39;\t&#39; 任意一种</span>
<span class="c1"># * 表示一个或多个，可以结合确定的单个字符或者字符范围使用</span>
</code></pre></div><h2 id="在shell中使用数组">在shell中使用数组</h2>
<p>bash 4 原生支持一维数组，在某些情况下可能会使用到这种数据结构。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 使用之前需要先声明数组</span>
<span class="nb">declare</span> -a array
<span class="nb">declare</span> -A Array
<span class="c1"># -a 声明的数组是普通的一维数组，index只能是0,1,2,...</span>
<span class="c1"># -A 声明的数组是关联数组，类似于python的字典，index可以自由定义</span>
<span class="c1"># 推荐使用 -A ，因为关联数组的兼容性比较好，它可以模拟普通数组，</span>
<span class="c1"># 而普通数组无法实现关联数组的特性</span>

<span class="c1"># 数组赋值</span>
<span class="nv">array</span><span class="o">=(</span><span class="m">1</span> <span class="m">2</span> <span class="m">3</span> 4<span class="o">)</span>
<span class="nv">Array</span><span class="o">=([</span>A<span class="o">]=</span><span class="m">1</span> <span class="o">[</span>B<span class="o">]=</span><span class="m">2</span> <span class="o">[</span>C<span class="o">]=</span><span class="m">3</span> <span class="o">[</span>D<span class="o">]=</span>4<span class="o">)</span>

<span class="c1"># 或者直接定义index和value</span>
Array<span class="o">[</span><span class="s2">&#34;index&#34;</span><span class="o">]=</span>vaule

<span class="c1"># 遍历index</span>
<span class="c1"># 使用 * 和 @ 均可</span>
<span class="k">for</span> i in <span class="si">${</span><span class="p">!array[*]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="nv">$i</span><span class="p">;</span> <span class="k">done</span><span class="p">;</span>
<span class="k">for</span> i in <span class="si">${</span><span class="p">!array[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="nv">$i</span><span class="p">;</span> <span class="k">done</span><span class="p">;</span>

<span class="c1"># 遍历value，和index类似</span>
<span class="k">for</span> i in <span class="si">${</span><span class="nv">array</span><span class="p">[*]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="nv">$i</span><span class="p">;</span> <span class="k">done</span><span class="p">;</span>
<span class="k">for</span> i in <span class="si">${</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="nv">$i</span><span class="p">;</span> <span class="k">done</span><span class="p">;</span>

<span class="c1"># 获取数组的元素个数</span>
<span class="nb">echo</span> <span class="si">${#</span><span class="nv">array</span><span class="p">[*]</span><span class="si">}</span><span class="p">;</span>
<span class="nb">echo</span> <span class="si">${#</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span>
<span class="c1"># 如果指定了确切的index，将会获取对应value的长度</span>
<span class="nb">echo</span> <span class="si">${#</span><span class="nv">array</span><span class="p">[</span><span class="s2">&#34;index&#34;</span><span class="p">]</span><span class="si">}</span><span class="p">;</span>
</code></pre></div><h2 id="awk内置函数split">awk内置函数split()</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># awk内置函数split()的用法：</span>
awk: split<span class="o">(</span>string_to_split,array,IFS<span class="o">)</span>
<span class="c1"># 第一个参数是想要进行分割的字符串</span>
<span class="c1"># 第二个参数是分割完成后的变量</span>
<span class="c1"># 第三个参数用来指定分割符</span>

<span class="c1"># 实例</span>
split<span class="o">(</span><span class="s2">&#34;A;B;C;D&#34;</span>,array,<span class="s1">&#39;;&#39;</span><span class="o">)</span>
<span class="c1"># 执行完成后，array=[&#39;A&#39;,&#39;B&#39;,&#39;C&#39;,&#39;D&#39;]</span>
<span class="c1"># 值得注意的是array是awk的内部变量</span>
</code></pre></div><h2 id="awk导入外部数据">awk导入外部数据</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># awk可以导入外部数据，通常会用来导入shell变量进行进一步处理</span>
<span class="c1"># 灵活利用导入可以实现多样的数据处理</span>

<span class="c1"># 导入字符串并生成关联数组：</span>
<span class="nb">echo</span> <span class="s1">&#39;begin&#39;</span> <span class="p">|</span> awk -v <span class="nv">foreign</span><span class="o">=</span><span class="s1">&#39;1#A#2#B#3#C&#39;</span> <span class="se">\
</span><span class="se"></span><span class="s1">&#39;BEGIN{
</span><span class="s1">    split(foreign, dict, &#34;#&#34;);
</span><span class="s1">    for(i=1;i&lt;=length(dict);i+=2){
</span><span class="s1">        result[dict[i]]=dict[i+1]
</span><span class="s1">    }
</span><span class="s1">}
</span><span class="s1">{
</span><span class="s1">    for (i in result){
</span><span class="s1">        print result[i];
</span><span class="s1">    }
</span><span class="s1">}&#39;</span>

<span class="c1"># -v 可以导入外部数据为awk内部变量</span>
<span class="c1"># 这个例子将字符串&#39;1#A#2#B#3#C&#39;转换为字典([1]=A [2]=B [3]=C)</span>
</code></pre></div><h2 id="简单的循环用例">简单的循环用例</h2>
<p>在 Linux 中经常需要批量执行命令，需要一些限制避免占用大量资源，下面提供一些简单的循环用例。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 限制同一时间内循环的进程数量</span>

<span class="c1"># 总运行次数，数据源存放在file中</span>
<span class="nv">number</span><span class="o">=</span><span class="k">$(</span>cat file <span class="p">|</span> wc -l<span class="k">)</span> 
<span class="c1"># 单次并发进程数量控制</span>
<span class="nv">size</span><span class="o">=</span><span class="m">20</span>

<span class="nv">begin</span><span class="o">=</span><span class="m">1</span>
<span class="nv">end</span><span class="o">=</span><span class="nv">$size</span>

<span class="k">until</span> <span class="o">[</span> <span class="nv">$begin</span> -gt <span class="s2">&#34;</span><span class="nv">$number</span><span class="s2">&#34;</span> <span class="o">]</span>
<span class="k">do</span>
    <span class="k">for</span> i in <span class="k">$(</span>sed -n <span class="s2">&#34;</span><span class="nv">$begin</span><span class="s2">&#34;</span>,<span class="s2">&#34;</span><span class="nv">$end</span><span class="s2">&#34;</span>p file<span class="k">)</span>
    <span class="k">do</span>
    <span class="o">{</span>
        <span class="c1"># 主循环体，数据取自于file</span>
    <span class="o">}</span><span class="p">&amp;</span>
    <span class="k">done</span> 

    <span class="nv">begin</span><span class="o">=</span><span class="k">$(</span> expr <span class="nv">$end</span> + <span class="m">1</span> <span class="k">)</span>
    <span class="nv">end</span><span class="o">=</span><span class="k">$(</span> expr <span class="nv">$end</span> + <span class="nv">$size</span> <span class="k">)</span>
    <span class="nb">wait</span>
    <span class="c1"># 单次并发会在这里阻塞，直到所有进程结束</span>
    <span class="c1"># 所以这个用例需要在循环体中加入超时控制</span>
<span class="k">done</span>


<span class="c1"># 循环读取文件内容</span>
<span class="c1"># 文件内容为多行数据，每行数据格式为 X Y Z</span>
<span class="k">while</span> <span class="nb">read</span> A B C
<span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$A</span>,<span class="nv">$B</span>,<span class="nv">$C</span>
<span class="k">done</span> &lt; file
</code></pre></div><h2 id="使用yum下载rpm包">使用yum下载rpm包</h2>
<p>有时候会有下载 rpm 包的需求，可以通过 yum 实现。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">yum install package --downloadonly --downloaddir<span class="o">=</span>/your/dir
<span class="c1"># 可以只下载 rpm 包而不进行安装</span>
<span class="c1"># 不指定下载目录，则下载后文件保存在 /var/cache/yum/ 下的子目录中</span>
<span class="c1"># 如果 --downloadonly 运行失败，可能需要自行安装这个插件</span>
</code></pre></div><h2 id="使用cpio打开rpm文件">使用cpio打开rpm文件</h2>
<p>rpm 包可以视为一个特殊的归档文件，如果需要提取这个档案中的内容，一般通过 rpm2cpio 和 cpio 去实现。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 常用的实例命令</span>
rpm2cpio package.rpm <span class="p">|</span> cpio -divm

<span class="c1"># 以下是 cpio 比较重要的参数</span>
<span class="c1"># -i/--extract 展开文件</span>
<span class="c1"># -o/--create 生成文件</span>
<span class="c1"># -v/--verbose 显示详细过程</span>
<span class="c1"># -d/--make-directories 在需要时建立目录</span>
<span class="c1"># -m/--preserve-modification-time 保留更改时间。</span>
</code></pre></div></article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://yuweizzz.github.io/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://yuweizzz.github.io/js/github-style.js"></script>


<script src="https://cubism.live2d.com/sdk-web/cubismcore/live2dcubismcore.min.js"></script>
<script type="text/javascript" src="https://yuweizzz.github.io/js/CustomLive2D.js"></script>


</html>