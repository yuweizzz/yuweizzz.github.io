<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://yuweizzz.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/github.min.css' />
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/github-style.css' />
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/light.css' />
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/dark.css' />
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/syntax.css' />
    <title>常用 Git 命令笔记 - Wei&#39;s blog</title>
    
    <link rel="icon" type="image/x-icon" href='/images/github.png'>
    
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="这篇笔记用来记录一些常用的 Git 命令。
" />
<meta name="keywords"
  content='blog, google analytics' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://yuweizzz.github.io/post/tips_about_git/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="常用 Git 命令笔记 - Wei&#39;s blog" />
<meta name="twitter:description"
  content="这篇笔记用来记录一些常用的 Git 命令。
" />
<meta name="twitter:site" content="https://yuweizzz.github.io" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://yuweizzz.github.io">


<meta property="og:type" content="article" />
<meta property="og:title" content="常用 Git 命令笔记 - Wei&#39;s blog">
<meta property="og:description"
  content="这篇笔记用来记录一些常用的 Git 命令。
" />
<meta property="og:url" content="https://yuweizzz.github.io/post/tips_about_git/" />
<meta property="og:site_name" content="常用 Git 命令笔记" />
<meta property="og:image"
  content="https://yuweizzz.github.io">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2020-07-23 22:00:00 &#43;0000 UTC" />











<script async src="https://www.googletagmanager.com/gtag/js?id=UA-174929827-1"></script>
<script>
  if (navigator.doNotTrack !== '1') {
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-174929827-1');
  }
</script>


</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://yuweizzz.github.io">
        <svg class="octicon" height="32" viewBox="0 0 16 16" version="1.1" width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd"
            d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:https://yuweizzz.github.io">
            </label>
          </form>
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://yuweizzz.github.io">
        <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
          width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>
  
<script src="https://unpkg.com/@popperjs/core@2"></script>
<script src="https://unpkg.com/tippy.js@6"></script>
<div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://yuweizzz.github.io">
                  <img class=" avatar-user"
                    src="https://yuweizzz.github.io/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://yuweizzz.github.io">Wei</a></span><span
                    class="path-divider">/</span><strong class="css-truncate-target mr-1" style="max-width: 410px"><a
                      href="https://yuweizzz.github.io/post/tips_about_git/">常用 Git 命令笔记</a></strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Thu, 23 Jul 2020 22:00:00 &#43;0000"
                    class="no-wrap">
                    Thu, 23 Jul 2020 22:00:00 &#43;0000</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Sat, 26 Feb 2022 10:54:04 &#43;0000"
                    class="no-wrap">
                    Sat, 26 Feb 2022 10:54:04 &#43;0000</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" class="btn btn-octicon m-0 mr-2 p-2" aria-haspopup="menu" aria-label="Table of Contents" role="button">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                          3184 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                    
                    <a class="muted-link mr-3" href="/tags/git">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      Git
                    </a>
                    
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5">
                <article class="markdown-body entry-content container-lg"><p>这篇笔记用来记录一些常用的 Git 命令。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">
                                       <span class="o">(</span>@@<span class="o">)</span> <span class="o">(</span>  <span class="o">)</span> <span class="o">(</span>@<span class="o">)</span>  <span class="o">(</span> <span class="o">)</span>  @@    <span class="o">()</span>    @     O     @     O      @
                                  <span class="o">(</span>   <span class="o">)</span>
                              <span class="o">(</span>@@@@<span class="o">)</span>
                           <span class="o">(</span>    <span class="o">)</span>

                         <span class="o">(</span>@@@<span class="o">)</span>
                       <span class="o">====</span>        ________                ___________
                   _D _<span class="p">|</span>  <span class="p">|</span>_______/        <span class="se">\_</span>_I_I_____<span class="o">===</span>__<span class="p">|</span>_________<span class="p">|</span>
                    <span class="p">|</span><span class="o">(</span>_<span class="o">)</span>---  <span class="p">|</span>   H<span class="se">\_</span>_______/ <span class="p">|</span>   <span class="p">|</span>        <span class="o">=</span><span class="p">|</span>___ ___<span class="p">|</span>      _________________
                    /     <span class="p">|</span>  <span class="p">|</span>   H  <span class="p">|</span>  <span class="p">|</span>     <span class="p">|</span>   <span class="p">|</span>         <span class="o">||</span>_<span class="p">|</span> <span class="p">|</span>_<span class="o">||</span>     _<span class="p">|</span>                <span class="se">\_</span>____A
                   <span class="p">|</span>      <span class="p">|</span>  <span class="p">|</span>   H  <span class="p">|</span>__--------------------<span class="p">|</span> <span class="o">[</span>___<span class="o">]</span> <span class="p">|</span>   <span class="o">=</span><span class="p">|</span>                        <span class="p">|</span>
                   <span class="p">|</span> ________<span class="p">|</span>___H__/__<span class="p">|</span>_____/<span class="o">[][]</span>~<span class="se">\_</span>______<span class="p">|</span>       <span class="p">|</span>   -<span class="p">|</span>                        <span class="p">|</span>
                   <span class="p">|</span>/ <span class="p">|</span>   <span class="p">|</span>-----------I_____I <span class="o">[][]</span> <span class="o">[]</span>  D   <span class="p">|</span><span class="o">=======</span><span class="p">|</span>____<span class="p">|</span>________________________<span class="p">|</span>_
                 __/ <span class="o">=</span><span class="p">|</span> o <span class="p">|</span><span class="o">=</span>-~O<span class="o">=====</span><span class="nv">O</span><span class="o">=====</span><span class="nv">O</span><span class="o">=====</span>O<span class="se">\ </span>____Y___________<span class="p">|</span>__<span class="p">|</span>__________________________<span class="p">|</span>_
                  <span class="p">|</span>/-<span class="o">=</span><span class="p">|</span>___<span class="p">|</span><span class="o">=</span>    <span class="o">||</span>    <span class="o">||</span>    <span class="o">||</span>    <span class="p">|</span>_____/~<span class="se">\_</span>__/          <span class="p">|</span>_D__D__D_<span class="p">|</span>  <span class="p">|</span>_D__D__D_<span class="p">|</span>
                   <span class="se">\_</span>/      <span class="se">\_</span>_/  <span class="se">\_</span>_/  <span class="se">\_</span>_/  <span class="se">\_</span>_/      <span class="se">\_</span>/               <span class="se">\_</span>/   <span class="se">\_</span>/    <span class="se">\_</span>/   <span class="se">\_</span>/

</code></pre></div><h2 id="前言">前言</h2>
<p>使用 Git 可以有条理地管理代码，尤其是在大型项目和团队开发的场合，熟练使用 Git 是开发人员的基本功。</p>
<p>想要熟练使用 Git 的最好办法是了解 Git 的基本原理和实践。</p>
<h2 id="快速了解git术语">快速了解Git术语</h2>
<p>首先了解几个基本概念：</p>
<ul>
<li>仓库 (repository) ：仓库是一个被 Git 管控的目录。</li>
<li>分支 (branch) ：每个仓库一般有一个默认分支 master/main ，并且可以拥有多个分支。</li>
<li>提交 (commit) ：可以视为整个代码仓库的不同版本，提交会推进仓库的版本更新。</li>
</ul>
<h2 id="创建并配置本地仓库">创建并配置本地仓库</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">cd</span> repository
$ git init
</code></pre></div><p>这样 repository 目录就是一个 Git 本地仓库，后续用来添加项目代码文件。</p>
<p>初始化仓库后，仓库会带有一些默认的配置，我们可以根据需要去查询或者修改。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># config -l用来查看仓库属性</span>
<span class="c1"># 如果要使用 github 的远程仓库，至少应该为仓库配置用户名和邮箱</span>
<span class="c1"># --global 和 --local 可以用来设定属性是 git 全局属性还是单一仓库属性</span>
$ git config -l 
$ git config <span class="o">[</span>--global<span class="p">|</span>--local<span class="o">]</span> user.name <span class="s2">&#34;your name&#34;</span> 
$ git config <span class="o">[</span>--global<span class="p">|</span>--local<span class="o">]</span> user.email <span class="s2">&#34;your@email.com&#34;</span> 
</code></pre></div><h2 id="转换仓库中文件的状态">转换仓库中文件的状态</h2>
<p>下面是一个 Git 仓库实例，基本覆盖了文件状态之间的转换：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ git status
<span class="c1"># On branch master</span>
<span class="c1"># Changes to be committed:</span>
<span class="c1">#   (use &#34;git reset HEAD &lt;file&gt;...&#34; to unstage)</span>
<span class="c1">#</span>
<span class="c1">#   modified:   fileA</span>
<span class="c1">#</span>
<span class="c1"># Changes not staged for commit:</span>
<span class="c1">#   (use &#34;git add &lt;file&gt;...&#34; to update what will be committed)</span>
<span class="c1">#   (use &#34;git checkout -- &lt;file&gt;...&#34; to discard changes in working directory)</span>
<span class="c1">#   (commit or discard the untracked or modified content in submodules)</span>
<span class="c1">#</span>
<span class="c1">#   modified:   fileB</span>
<span class="c1">#</span>
<span class="c1"># Untracked files:</span>
<span class="c1">#   (use &#34;git add &lt;file&gt;...&#34; to include in what will be committed)</span>
<span class="c1">#</span>
<span class="c1">#   fileC</span>

</code></pre></div><p>这里引入了 Git 仓库<strong>工作区</strong>和<strong>暂存区</strong>的概念：</p>
<ul>
<li>
<p>上面的仓库包含了多种文件，FileA ，FileB ，FileC 处于同一个工作区，工作区 (workspace) 可以简单认为是仓库所在目录，其中存放了各种不同状态的文件。</p>
</li>
<li>
<p>暂存区 (index) 是一个抽象概念，它的信息会保存在实际文件 (.git/index) 中，我们修改过的文件，就可以暂存 (staged) 到暂存区中，也是 Changes to be committed 这一部分，它的下一步操作通常会是提交 (commit) 。</p>
</li>
</ul>
<p>下面进入实例的分析：</p>
<ul>
<li>Changes to be committed 列出的是已经被暂存的 FileA ，它已经由 not staged 转换为 staged 。下一步它可以提交到分支中，或者使用 reset 重置掉这次 modified 。</li>
<li>Changes not staged for commit 列出的是在工作区中被修改过，但是尚未被 staged 的 FileB 。下一步它可以使用 add 更新到暂存区，或者使用 checkout 丢弃本次修改，恢复到上次 add 的暂存区版本或 commit 保存的版本，恢复的版本由最近的一次的修改情况决定。</li>
<li>Untracked 的 FileC 目前是不受 Git 管制的，但是可以通过 add 转换状态。</li>
</ul>
<p>以下是实际命令的使用过程：</p>
<h3 id="添加和删除文件">添加和删除文件</h3>
<p>添加文件和暂存文件都使用了 add 命令，删除文件使用 rm 命令。</p>
<p>通过删除文件，我们可以把文件排除出工作区 (untracked) ，如果是某些特定种类的文件需要排除，推荐使用 .gitignore 。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ git add &lt;file&gt;
<span class="c1"># add 用于 tracked 和 staged</span>

$ git rm <span class="o">[</span>-f<span class="o">]</span> <span class="o">[</span>--cached<span class="o">]</span> <span class="o">[</span>--<span class="o">]</span> &lt;file&gt;
<span class="c1"># rm 用来移除文件</span>
<span class="c1"># rm 带 -f 选项会删除工作区和暂存区文件，即本地文件也会被删除</span>
<span class="c1"># rm 带 --cached 选项会删除暂存区文件，工作区文件不会被改变</span>
<span class="c1"># -- 选项用来把操作限制在当前分支</span>
</code></pre></div><h3 id="文件的重置">文件的重置</h3>
<p>需要丢弃不想要的修改，可以使用 reset 命令或者 checkout 命令。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ git reset HEAD &lt;file&gt;
<span class="c1"># reset 指令涉及 git 的实现原理，HEAD 是指向当前分支最新 commit 的指针</span>
<span class="c1"># 这里只能用于回退暂存区文件，后面会有涉及这一步的解释</span>

$ git checkout -- &lt;file&gt;
<span class="c1"># checkout 其实是用于分支的命令，-- 用来把操作限制在当前分支</span>
<span class="c1"># 这里用于将文件恢复到上次 add 的暂存区版本或 commit 保存的版本</span>
<span class="c1"># 这个命令会改变实际文件，有一定风险</span>
</code></pre></div><h2 id="提交到新版本">提交到新版本</h2>
<p>文件修改，重置，暂存一系列操作，都是为了将代码修改到我们认可的程度，然后 commit 到分支中，产生新的版本库，一次或多次的 commit 可以视为一个新的版本库。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ git commit -m &lt;msg&gt;
<span class="c1"># 提交暂存区的文件到版本库， -m 为提交的说明信息</span>

$ git commit --amend <span class="o">[</span>&lt;msg&gt;<span class="o">]</span>
<span class="c1"># 修改上次 commit ，可以添加提交暂存区文件并修改上次 commit 说明信息</span>
</code></pre></div><p>这样所有 staged 的文件就会被提交到一个新的版本库中了。我们还会得到一个 commit id ，这是非常重要的依据，后续版本库的管理都是基于 commit id 来实现的。</p>
<p>带 &ndash;amend 的 commit 指令可以在一次提交后，追加位于暂存区的文件变动。使用这个命令后只会有一个提交，本次带 &ndash;amend 的提交将代替上一次提交的结果。如果暂存区是干净的，可以使用这个命令修改上次 commit 的说明信息。</p>
<h2 id="对commit进行检查">对commit进行检查</h2>
<p>在经过一定的开发时间后，仓库必然会产生很多 commit ，可以使用 log 和 diff 进行检查。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ git log
<span class="c1"># 查看 commit 历史记录，可以看到简要的提交信息</span>

$ git show &lt;object&gt;
<span class="c1"># 用来查看 commit 的具体变动，默认为最近一次 commit 的详细信息</span>
<span class="c1"># 可以通过指定 commit id 来查看不同 commit </span>

$ git reflog
<span class="c1"># 类似于 bash history，它会输出 commit 操作的历史记录，可以作为版本回退和误操作恢复的依据</span>

$ git diff &lt;commit&gt; &lt;commit&gt; <span class="o">[</span>--<span class="o">]</span> <span class="o">[</span>&lt;path&gt;...<span class="o">]</span>
<span class="c1"># 用来查看不同 commit 之间的所有文件的变动，可以指定单个文件</span>

$ git diff --cached <span class="o">[</span>&lt;commit&gt;<span class="o">]</span> <span class="o">[</span>--<span class="o">]</span> <span class="o">[</span>&lt;path&gt;...<span class="o">]</span>
<span class="c1"># 除了用于 commit 外，还可以用来查看暂存区和工作区的文件变动</span>
</code></pre></div><h2 id="回退commit">回退commit</h2>
<p>如果需要撤消 commit ，恢复原有的代码版本，需要用到 reset 指令。</p>
<p>在 reset 命令中，我们经常会看到 HEAD 的使用，它用来指向当前分支的最新 commit ，所以最新 commit 的上一个版本使用 HEAD^ 表示，上上一个版本使用 HEAD^^ 表示，这是一种便捷写法，使用对应 commit id 也是一样的效果。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># reset 的使用参数</span>
$ git reset <span class="o">[</span>--mixed <span class="p">|</span> --soft <span class="p">|</span> --hard <span class="p">|</span> --merge <span class="p">|</span> --keep<span class="o">]</span> <span class="o">[</span>-q<span class="o">]</span> <span class="o">[</span>&lt;commit&gt;<span class="o">]</span>
<span class="c1"># --mixed               reset HEAD and index</span>
<span class="c1"># --soft                reset only HEAD</span>
<span class="c1"># --hard                reset HEAD, index and working tree</span>
<span class="c1"># --merge               reset HEAD, index and working tree</span>
<span class="c1"># --keep                reset HEAD but keep local changes</span>
<span class="c1"># -q, --quiet           be quiet, only report errors</span>
</code></pre></div><p>可以看到 reset 有五种工作模式，但我在使用的时候一般只用到 mixed ， soft 和 hard 三种：</p>
<ul>
<li>mixed ：默认的工作模式，这个模式会影响 commit 和暂存区保存的文件变动。</li>
<li>soft ：这个模式的影响对象是 commit ，所以实际效果看起來就只有 commit 的消失，也就是 HEAD 指向了更旧的 commit 。 commit 回退后，文件变化会存放在暂存区。</li>
<li>hard ：这个模式下， commit ，工作区，暂存区的文件变动都会丢失。</li>
</ul>
<p>在前面的实例中 <code>git reset HEAD &lt;file&gt;</code> 就是 mixed 模式的应用，它用来回退 staged 文件到 not staged 的状态。因为指定了 HEAD ，所以文件变化还是留存在工作区，暂存区被清空， commit 无变化。</p>
<p>soft 模式是最安全的，它不会影响实际文件，而 hard 模式是最为危险，在没有确定你需要丢弃你新写的代码，最好不要使用。</p>
<p>此外还有一个值得注意的地方， reset 命令可以应用于单个文件，但仅限于 mixed 模式， hard 模式和 soft 模式均无法对单文件作用。</p>
<p>如果需要撤销 commit ，但不具体恢复到某个原有的代码版本，需要用到 revert 指令。</p>
<p>revert 的使用方法类似于 reset ，但它不会改变 commit 的历史记录，而是在最新 commit 的基础上，将所指定 commit 的文件变动还原，并将这个过程提交为一个新的 commit 。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># revert 的使用参数</span>
$ git revert &lt;commit&gt;
<span class="c1"># 执行后将会产生新的 commit 的提交，默认将以 revert 信息作为 commit 信息</span>
</code></pre></div><h2 id="分支管理">分支管理</h2>
<p>简单项目可能没有使用到多分支，但如果是大型项目和团队开发项目，一般都会有多分支，多分支的好处在于开发过程中，各分支之间互不干扰，代码维护起来方便简单。</p>
<p>分支创建，分支删除和分支合并是分支管理比较常用的操作，其中分支合并应该是多分支场景最重要的操作，当不同分支上的开发进行到一定程度时，可以将所涉及的文件变化都合并到同个分支中，然后这个分支就拥有了最新版本的文件。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># git branch 会列出当前已有分支，并以 * 标识目前所在的分支</span>
$ git branch
* master
  branchA
  branchB

<span class="c1"># 创建一个新的分支。</span>
$ git branch &lt;branch name&gt;

<span class="c1"># 创建和切换到目的分支。</span>
$ git checkout -b &lt;branch name&gt;
<span class="c1"># -b 切换到目的分支，如果目的分支不存在，则会创建它后再执行切换</span>

<span class="c1"># 删除一个分支</span>
$ git branch <span class="o">[</span> -d <span class="p">|</span> -D <span class="o">]</span> &lt;branch name&gt;
<span class="c1"># -d 删除分支时还会检查分支是否已经合并，如果未合并，那么删除不会执行</span>
<span class="c1"># -D 和 -d 的区别在于不检查分支的合并情况，直接执行删除</span>

<span class="c1"># 合并分支</span>
<span class="c1"># 需要先切换到旧的分支中</span>
$ git checkout &lt;old branch name&gt;
<span class="c1"># 然后将新改动的分支合并到旧的分支中</span>
$ git merge &lt;new branch name&gt;
<span class="c1"># 最理想的情况是 Fast-forward ，如果不同分支中的改动有冲突，则需要手动解决后才能合并</span>
</code></pre></div><h2 id="工作区改动入栈暂存">工作区改动入栈暂存</h2>
<p>如果我们需要临时切换到其他分支，而不想对现有工作区进行暂存和提交，希望它保持原状，可以使用 stash 来将工作区入栈保存。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ git stash
<span class="c1"># 保存暂存区和工作区的文件改动</span>

$ git stash list
<span class="c1"># 显示入栈暂存的情况</span>

$ git stash pop
<span class="c1"># 恢复已入栈的文件改动到工作区，默认会把工作区和暂存区的改动都恢复到工作区</span>
$ git stash pop --index 
<span class="c1"># 在默认的基础上，除了工作区的文件改动，还会将原来暂存区的改动恢复到暂存区</span>

$ git stash drop <span class="o">[</span>&lt;stash&gt;<span class="o">]</span>
<span class="c1"># 删除一个已入栈的工作区变动，如果不指定具体的 stash ，则默认删除最新入栈的 stash 。</span>

$ git stash clear
<span class="c1"># 删除所有已入栈的工作区变动</span>
</code></pre></div><h2 id="结语">结语</h2>
<p>这篇笔记基本覆盖了本地使用 Git 时的可能会使用的命令，它们的复杂度并不高，我们只需要记忆这些实际应用中使用率比较高的命令，更复杂的命令可以在需要时再查阅。</p></article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script>
 
 
 
 window.onload = function () {
   const header = document.getElementById('post-header');
   const headerHeight = header.offsetHeight;
   
   document.documentElement.style.scrollPaddingTop = headerHeight + 10 + "px";
 }

 const tocToggleButton = document.getElementById("toc-toggle");

 const tippyInstance = tippy('#toc-toggle', {
  trigger: 'click',
  content: '<div id="table-of-contents">\u003cnav id=\u0022TableOfContents\u0022\u003e\n  \u003cul\u003e\n    \u003cli\u003e\u003ca href=\u0022#前言\u0022\u003e前言\u003c\/a\u003e\u003c\/li\u003e\n    \u003cli\u003e\u003ca href=\u0022#快速了解git术语\u0022\u003e快速了解Git术语\u003c\/a\u003e\u003c\/li\u003e\n    \u003cli\u003e\u003ca href=\u0022#创建并配置本地仓库\u0022\u003e创建并配置本地仓库\u003c\/a\u003e\u003c\/li\u003e\n    \u003cli\u003e\u003ca href=\u0022#转换仓库中文件的状态\u0022\u003e转换仓库中文件的状态\u003c\/a\u003e\n      \u003cul\u003e\n        \u003cli\u003e\u003ca href=\u0022#添加和删除文件\u0022\u003e添加和删除文件\u003c\/a\u003e\u003c\/li\u003e\n        \u003cli\u003e\u003ca href=\u0022#文件的重置\u0022\u003e文件的重置\u003c\/a\u003e\u003c\/li\u003e\n      \u003c\/ul\u003e\n    \u003c\/li\u003e\n    \u003cli\u003e\u003ca href=\u0022#提交到新版本\u0022\u003e提交到新版本\u003c\/a\u003e\u003c\/li\u003e\n    \u003cli\u003e\u003ca href=\u0022#对commit进行检查\u0022\u003e对commit进行检查\u003c\/a\u003e\u003c\/li\u003e\n    \u003cli\u003e\u003ca href=\u0022#回退commit\u0022\u003e回退commit\u003c\/a\u003e\u003c\/li\u003e\n    \u003cli\u003e\u003ca href=\u0022#分支管理\u0022\u003e分支管理\u003c\/a\u003e\u003c\/li\u003e\n    \u003cli\u003e\u003ca href=\u0022#工作区改动入栈暂存\u0022\u003e工作区改动入栈暂存\u003c\/a\u003e\u003c\/li\u003e\n    \u003cli\u003e\u003ca href=\u0022#结语\u0022\u003e结语\u003c\/a\u003e\u003c\/li\u003e\n  \u003c\/ul\u003e\n\u003c\/nav\u003e</div>',
  allowHTML: true,
  placement: 'bottom-start',
  interactive: true,
  arrow: false,
  maxWidth: "none",
  onHide: function () { tocToggleButton.classList.remove("hover"); },
  onShow: function () { tocToggleButton.classList.add("hover"); },
  onShown: function () {
    selectTableOfContentsOption();

    if (window.hasSetupTableOfContentsListeners) {
      return;
    }

    const tableOfContents = document.getElementById("table-of-contents");
    tableOfContents.addEventListener('click', function () {
      
      tippyInstance[0].hide();
    });

    window.hasSetupTableOfContentsListeners = true;
  }
 });

 function selectTableOfContentsOption () {
   const optionSelectedClass = 'table-of-contents-option-selected';

   const tableOfContentsOptions = document.querySelectorAll("#table-of-contents > nav > ul li");

   for (const option of tableOfContentsOptions) {
     

     const [child] = option.children;
     if (child.tagName.toLowerCase() !== 'a') {
       continue;
     }

     if (window.location.href === child.href) {
       child.classList.add(optionSelectedClass);
     } else {
       child.classList.remove(optionSelectedClass);
     }
   }
 }

 window.onhashchange = selectTableOfContentsOption;
</script>


  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://yuweizzz.github.io">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://yuweizzz.github.io/js/github-style.js"></script>


<script src="https://cubism.live2d.com/sdk-web/cubismcore/live2dcubismcore.min.js"></script>
<script type="text/javascript" src="https://yuweizzz.github.io/js/CustomLive2D.js"></script>


</html>