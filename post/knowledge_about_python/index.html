<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://yuweizzz.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/github.min.css' />
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/github-style.css' />
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/light.css' />
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/dark.css' />
    <link rel="stylesheet" href='https://yuweizzz.github.io/css/syntax.css' />
    <title>Python 知识笔记 - Wei&#39;s blog</title>
    
    <link rel="icon" type="image/x-icon" href='/images/favicon.svg'>
    
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="这篇笔记用来记录一些 python 编程的相关知识。
" />
<meta name="keywords"
  content='blog, google analytics' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://yuweizzz.github.io/post/knowledge_about_python/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Python 知识笔记 - Wei&#39;s blog" />
<meta name="twitter:description"
  content="这篇笔记用来记录一些 python 编程的相关知识。
" />
<meta name="twitter:site" content="https://yuweizzz.github.io/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://yuweizzz.github.io/">


<meta property="og:type" content="article" />
<meta property="og:title" content="Python 知识笔记 - Wei&#39;s blog">
<meta property="og:description"
  content="这篇笔记用来记录一些 python 编程的相关知识。
" />
<meta property="og:url" content="https://yuweizzz.github.io/post/knowledge_about_python/" />
<meta property="og:site_name" content="Python 知识笔记" />
<meta property="og:image"
  content="https://yuweizzz.github.io/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2022-01-04 22:22:45 &#43;0000 UTC" />











  
    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-RFSQDKSFR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-RFSQDKSFR1');
        }
      </script>
    
  




</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://yuweizzz.github.io/">
        <img class="octicon" height="32" width="32" src="/images/github-mark-white.png">
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:https://yuweizzz.github.io/">
            </label>
          </form>
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://yuweizzz.github.io/">
        <img class="octicon octicon-mark-github v-align-middle" height="32" width="32" src="/images/github-mark-white.png">
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>

  
<div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://yuweizzz.github.io/">
                  <img class=" avatar-user"
                    src="https://yuweizzz.github.io/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://yuweizzz.github.io/">Wei</a>
                  </span>
                  <span class="path-divider">/</span>
                  <strong class="css-truncate css-truncate-target mr-1" style="max-width: 410px">
                    <a href="https://yuweizzz.github.io/post/knowledge_about_python/">Python 知识笔记</a>
                  </strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Tue, 04 Jan 2022 22:22:45 &#43;0000"
                    class="no-wrap">
                    Tue, 04 Jan 2022 22:22:45 &#43;0000</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Fri, 02 Aug 2024 08:54:52 &#43;0000"
                    class="no-wrap">
                    Fri, 02 Aug 2024 08:54:52 &#43;0000</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      3327 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                    
                    <a class="muted-link mr-3" href="/tags/python">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      Python
                    </a>
                    
                    <a class="muted-link mr-3" href="/tags/elasticsearch">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      ElasticSearch
                    </a>
                    
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><p>这篇笔记用来记录一些 python 编程的相关知识。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                                       <span class="o">(</span>@@<span class="o">)</span> <span class="o">(</span>  <span class="o">)</span> <span class="o">(</span>@<span class="o">)</span>  <span class="o">(</span> <span class="o">)</span>  @@    <span class="o">()</span>    @     O     @     O      @
</span></span><span class="line"><span class="cl">                                  <span class="o">(</span>   <span class="o">)</span>
</span></span><span class="line"><span class="cl">                              <span class="o">(</span>@@@@<span class="o">)</span>
</span></span><span class="line"><span class="cl">                           <span class="o">(</span>    <span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                         <span class="o">(</span>@@@<span class="o">)</span>
</span></span><span class="line"><span class="cl">                       <span class="o">====</span>        ________                ___________
</span></span><span class="line"><span class="cl">                   _D _<span class="p">|</span>  <span class="p">|</span>_______/        <span class="se">\_</span>_I_I_____<span class="o">===</span>__<span class="p">|</span>_________<span class="p">|</span>
</span></span><span class="line"><span class="cl">                    <span class="p">|</span><span class="o">(</span>_<span class="o">)</span>---  <span class="p">|</span>   H<span class="se">\_</span>_______/ <span class="p">|</span>   <span class="p">|</span>        <span class="o">=</span><span class="p">|</span>___ ___<span class="p">|</span>      _________________
</span></span><span class="line"><span class="cl">                    /     <span class="p">|</span>  <span class="p">|</span>   H  <span class="p">|</span>  <span class="p">|</span>     <span class="p">|</span>   <span class="p">|</span>         <span class="o">||</span>_<span class="p">|</span> <span class="p">|</span>_<span class="o">||</span>     _<span class="p">|</span>                <span class="se">\_</span>____A
</span></span><span class="line"><span class="cl">                   <span class="p">|</span>      <span class="p">|</span>  <span class="p">|</span>   H  <span class="p">|</span>__--------------------<span class="p">|</span> <span class="o">[</span>___<span class="o">]</span> <span class="p">|</span>   <span class="o">=</span><span class="p">|</span>                        <span class="p">|</span>
</span></span><span class="line"><span class="cl">                   <span class="p">|</span> ________<span class="p">|</span>___H__/__<span class="p">|</span>_____/<span class="o">[][]</span>~<span class="se">\_</span>______<span class="p">|</span>       <span class="p">|</span>   -<span class="p">|</span>                        <span class="p">|</span>
</span></span><span class="line"><span class="cl">                   <span class="p">|</span>/ <span class="p">|</span>   <span class="p">|</span>-----------I_____I <span class="o">[][]</span> <span class="o">[]</span>  D   <span class="p">|</span><span class="o">=======</span><span class="p">|</span>____<span class="p">|</span>________________________<span class="p">|</span>_
</span></span><span class="line"><span class="cl">                 __/ <span class="o">=</span><span class="p">|</span> o <span class="p">|</span><span class="o">=</span>-~O<span class="o">=====</span><span class="nv">O</span><span class="o">=====</span><span class="nv">O</span><span class="o">=====</span>O<span class="se">\ </span>____Y___________<span class="p">|</span>__<span class="p">|</span>__________________________<span class="p">|</span>_
</span></span><span class="line"><span class="cl">                  <span class="p">|</span>/-<span class="o">=</span><span class="p">|</span>___<span class="p">|</span><span class="o">=</span>    <span class="o">||</span>    <span class="o">||</span>    <span class="o">||</span>    <span class="p">|</span>_____/~<span class="se">\_</span>__/          <span class="p">|</span>_D__D__D_<span class="p">|</span>  <span class="p">|</span>_D__D__D_<span class="p">|</span>
</span></span><span class="line"><span class="cl">                   <span class="se">\_</span>/      <span class="se">\_</span>_/  <span class="se">\_</span>_/  <span class="se">\_</span>_/  <span class="se">\_</span>_/      <span class="se">\_</span>/               <span class="se">\_</span>/   <span class="se">\_</span>/    <span class="se">\_</span>/   <span class="se">\_</span>/
</span></span></code></pre></div><h2 id="创建-python-虚拟环境">创建 python 虚拟环境</h2>
<p>在 python 项目中经常会因为依赖的版本不同而存在不兼容的问题，所以我们应该使用虚拟环境将不同项目的依赖隔离，否则混用的依赖可能会产生各种各样的运行问题。</p>
<p>在 python2 中经常使用 virtualenv 作为虚拟环境管理库，在 python3 中可以直接使用标准库的自带虚拟环境管理库 venv 。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># python2 的 virtualenv 需要独立安装</span>
</span></span><span class="line"><span class="cl">$ pip install virtualenv
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 python2 的 virtualenv 创建虚拟环境</span>
</span></span><span class="line"><span class="cl">$ virtualenv project
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 激活后可以获得独立的虚拟环境</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">source</span> project/bin/activate
</span></span><span class="line"><span class="cl"><span class="o">(</span>project<span class="o">)</span> $ python --version
</span></span><span class="line"><span class="cl">Python 2.7.5
</span></span><span class="line"><span class="cl"><span class="o">(</span>project<span class="o">)</span> $ pip list
</span></span><span class="line"><span class="cl">Package    Version
</span></span><span class="line"><span class="cl">---------- -------
</span></span><span class="line"><span class="cl">pip        20.3.3
</span></span><span class="line"><span class="cl">setuptools 44.1.1
</span></span><span class="line"><span class="cl">wheel      0.36.2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 退出虚拟环境</span>
</span></span><span class="line"><span class="cl">$ deactivate
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># python3 的 venv 不需要额外安装</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 实际使用和 virtualenv 没有特别大的区别</span>
</span></span><span class="line"><span class="cl">$ python3 -m venv project
</span></span><span class="line"><span class="cl">$ <span class="nb">source</span> project/bin/activate
</span></span><span class="line"><span class="cl"><span class="o">(</span>project<span class="o">)</span> $ python --version
</span></span><span class="line"><span class="cl">Python 3.6.8
</span></span><span class="line"><span class="cl"><span class="o">(</span>project<span class="o">)</span> $ pip list
</span></span><span class="line"><span class="cl">pip <span class="o">(</span>9.0.3<span class="o">)</span>
</span></span><span class="line"><span class="cl">setuptools <span class="o">(</span>39.2.0<span class="o">)</span>
</span></span><span class="line"><span class="cl">$ deactivate
</span></span></code></pre></div><h2 id="依赖管理">依赖管理</h2>
<p>创建虚拟环境后就可以直接安装需要的依赖，我的建议是除了虚拟环境管理库，其他依赖尽量不要在全局环境安装。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 更换镜像源</span>
</span></span><span class="line"><span class="cl">$ pip config <span class="nb">set</span> global.index-url https://mirrors.aliyun.com/pypi/simple/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 安装全局依赖</span>
</span></span><span class="line"><span class="cl">$ pip install virtualenv
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 在虚拟环境中安装需要的包</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>project<span class="o">)</span> $ pip install &lt;package&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 将项目中的依赖导出</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>project<span class="o">)</span> $ pip freeze &gt; requirements.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 导入已定义的依赖列表</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>project<span class="o">)</span> $ pip install -r requirements.txt
</span></span></code></pre></div><h2 id="字符串格式化">字符串格式化</h2>
<p>在 python 中对字符串格式化的操作比较频繁，这里做个备忘，记录一下相关的方法。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># format 在 python2 和 python3 中均可用</span>
</span></span><span class="line"><span class="cl"><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;python&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">greet</span> <span class="o">=</span> <span class="s2">&#34;hi, this is </span><span class="si">{}</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># f-string 表达式在 python 3.6 以上版本可用</span>
</span></span><span class="line"><span class="cl"><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;python&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">greet</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;hi, this is </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 可以对原有数据做格式化，主要通过 : 来定义输出格式</span>
</span></span><span class="line"><span class="cl"><span class="n">value</span> <span class="o">=</span> <span class="mi">16</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 十进制数字转为十六进制字符串</span>
</span></span><span class="line"><span class="cl"><span class="n">value_format</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="si">{:x}</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">value_format</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">value</span><span class="si">:</span><span class="s2">x</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span></code></pre></div><p>这里介绍的方法返回值都是字符串，比较适合用在格式化输出或者日志记录中。</p>
<h2 id="字典的常用方法">字典的常用方法</h2>
<p>字典在各类编程语言中非常常见，这里记录一下 python 中字典的常用方法。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">Count</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;A&#34;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&#34;B&#34;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 删除一个原有的键值对</span>
</span></span><span class="line"><span class="cl"><span class="n">Count</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&#34;A&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 增加一个新的键值对</span>
</span></span><span class="line"><span class="cl"><span class="n">Count</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&#34;C&#34;</span><span class="p">:</span> <span class="mi">30</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 获取指定键的值，如果没有这个键则返回预设值</span>
</span></span><span class="line"><span class="cl"><span class="n">Count</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;A&#34;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 遍历所有键值对</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">Count</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># items 返回值是元组</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">each</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">Count</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># 直接在循环中拆分元组</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="集合">集合</h2>
<p>在 python 中集合使用的频率可能会比较低，但它在某些场合非常好用。</p>
<p>集合最大的特点在于集合内的所有元素都是唯一的。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">array</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="c1"># print 将会输出 {1, 2, 3}</span>
</span></span></code></pre></div><p>实际中，集合应该是通过 hash 来实现这个特性的。</p>
<p>由于列表是可变的对象，如果你想将任意嵌套列表转化为集合就会得到 unhashable type 的报错，因为它无法计算出确定的 hash 值。相反地，常规的数字，字符串是 hashable 的，并且 python 的元组也是 hashable 的。</p>
<p>我们可以利用集合元素的唯一性，来实现两部分数据的差异对比：</p>
<ul>
<li>首先提取两部分数据的关键值，它应该像数据库记录的主键，作为这部分数据的最大特征值。</li>
<li>将它们分别转化为集合，并取得补集，或称为对称差集。</li>
<li>对这个对称差集做遍历，将它们分类归属。</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># 假设有以下两个数据集</span>
</span></span><span class="line"><span class="cl"><span class="n">Old</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;A&#34;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&#34;B&#34;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s2">&#34;C&#34;</span><span class="p">:</span> <span class="mi">30</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">New</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;B&#34;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&#34;C&#34;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&#34;D&#34;</span><span class="p">:</span> <span class="mi">40</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 拿到数据集的所有重要特征值组合为元组</span>
</span></span><span class="line"><span class="cl"><span class="n">Old_tuples</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&#34;A&#34;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="s2">&#34;B&#34;</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="p">(</span><span class="s2">&#34;C&#34;</span><span class="p">,</span> <span class="mi">30</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl"><span class="n">New_tuples</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&#34;B&#34;</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="p">(</span><span class="s2">&#34;C&#34;</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span> <span class="p">(</span><span class="s2">&#34;D&#34;</span><span class="p">,</span> <span class="mi">40</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 集合化后取补集</span>
</span></span><span class="line"><span class="cl"><span class="n">Old_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">Old_tuples</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">New_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">New_tuples</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">Sysmmetric_Difference</span> <span class="o">=</span> <span class="n">Old_set</span> <span class="o">^</span> <span class="n">New_set</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Sysmmetric_Difference: {(&#39;D&#39;, 40), (&#39;A&#39;, 10), (&#39;B&#39;, 100), (&#39;B&#39;, 20)}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 遍历数据</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">Sysmmetric_Difference</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">Old_tuples</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Old Data: &#34;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">New_tuples</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;New Data: &#34;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 实际输出：</span>
</span></span><span class="line"><span class="cl"><span class="c1"># New Data:  (&#39;D&#39;, 40)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Old Data:  (&#39;B&#39;, 20)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Old Data:  (&#39;A&#39;, 10)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># New Data:  (&#39;B&#39;, 100)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 这里还不能完全确定部分数据，可以多做一次特征筛选</span>
</span></span><span class="line"><span class="cl"><span class="n">Indexs</span> <span class="o">=</span> <span class="p">[</span> <span class="n">key</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">Sysmmetric_Difference</span> <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Counter 可以统计列表的元素出现次数</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
</span></span><span class="line"><span class="cl"><span class="n">Both</span> <span class="o">=</span> <span class="p">[</span> <span class="n">key</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">dict</span><span class="p">(</span><span class="n">Counter</span><span class="p">(</span><span class="n">Indexs</span><span class="p">))</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">Sysmmetric_Difference</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">Both</span> <span class="ow">and</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="n">Old_set</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Before Changed Data: &#34;</span><span class="p">,</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">Both</span> <span class="ow">and</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="n">New_set</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;After Changed Data: &#34;</span><span class="p">,</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="n">Old_set</span> <span class="ow">and</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">New_set</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Old Data: &#34;</span><span class="p">,</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="n">New_set</span> <span class="ow">and</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Old_set</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;New Data: &#34;</span><span class="p">,</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 实际输出：</span>
</span></span><span class="line"><span class="cl"><span class="c1"># New Data:  (&#39;D&#39;, 40)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Before Changed Data:  (&#39;B&#39;, 20)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Old Data:  (&#39;A&#39;, 10)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># After Changed Data:  (&#39;B&#39;, 100)</span>
</span></span></code></pre></div><p>以上只是一个理想化的计算过程，实际中应该要结合目标场景来使用。</p>
<h2 id="迭代器和生成器">迭代器和生成器</h2>
<p>这是对使用 map 函数引发异常的探究。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">List</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">Map</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="n">List</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">Map</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">Map</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 在使用 python3 的情况下：</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 第一次输出为 [2, 3, 4, 5, 6]</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 第二次输出为 []</span>
</span></span></code></pre></div><p>在 python 中，很多数据类型都是可迭代的，比如列表就是最经典的可迭代对象，可以使用 <code>isinstance(Object, Iterable)</code> 来判断对象是否是可迭代的， <code>Iterable</code> 需要从 <code>collections</code> 中导入。</p>
<p>实际中，一个对象如果是可迭代的，那么它需要实现 <code>__iter__</code> 方法或者 <code>__getitem__</code> 方法。</p>
<p>其中 <code>__getitem__</code> 方法常见于通过索引取值的数据类型，而 <code>__iter__</code> 是可迭代对象优先使用的方法，一般它会返回迭代器对象 iterator object 。</p>
<p>迭代器对象的作用是遍历可迭代对象。它自身需要实现 <code>__iter__</code> 和 <code>__next__</code> 两种方法。</p>
<p>其中 <code>__iter__</code> 还是用于返回迭代器对象，通常就是这个 iterator object 本身， <code>__next__</code> 则是迭代器对象用来获取下一元素的方法。</p>
<p>在 python2 中， map 函数返回是一个列表，但在 python3 中， map 函数返回是一个 map 对象。虽然列表和 map 对象都是可迭代对象，但是实际中 map 对象是迭代器对象，所以在上面的测试用例中， map 对象经历两次迭代，第二次迭代时 <code>__next__</code> 已经无法继续获取下一个元素，取值为空。</p>
<p>除了可迭代对象和迭代器，还会使用到生成器 generator object ，实际中它就是迭代器对象的子类。</p>
<p>我们一般通过关键字 <code>yield</code> 定义生成器函数。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">gen</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">yield</span> <span class="s2">&#34;step1&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">yield</span> <span class="s2">&#34;step2&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">yield</span> <span class="s2">&#34;step3&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">([</span><span class="n">each</span> <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">gen</span><span class="p">()])</span>
</span></span><span class="line"><span class="cl"><span class="c1"># print 将会输出 [&#39;step1&#39;, &#39;step2&#39;, &#39;step3&#39;]</span>
</span></span></code></pre></div><p>实际中常见的用法是在循环中使用关键字 <code>yield</code> ，变相实现写入多个 <code>yield</code> 的效果，这样生成器就可以多次产生返回值。</p>
<p>在生成器函数中，当遍历语句执行到 <code>yield</code> 关键字时会产生返回值并结束本次步进，下一轮遍历则从 <code>yield</code> 关键字之后的语句开始执行，如果直接调用生成器函数会返回对应的生成器对象，这里的工作方式实际上就是 <code>__iter__</code> 和 <code>__next__</code> 的组合。</p>
<h2 id="使用-supervisor-值守-python-进程">使用 supervisor 值守 python 进程</h2>
<p>使用 python 作为后台服务的时候，如果希望它可以起到类似于 systemd 具体服务的效果，可以使用 supervisor 。</p>
<p>supervisor 是 python 编写的进程管理服务，使用 client/server 架构，可以方便监测进程状态，并提供值守功能，其中 server 是 supervisord ，它负责监听挂载的进程状态和客户端的请求信号， client 是 supervisorctl ，用于向服务端发送控制信号，使用 supervisor 的好处在于程序的启动变得简洁，并且自带值守功能，不用担心进程意外死亡导致的服务停摆。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 推荐使用 yum 安装 supervisor </span>
</span></span><span class="line"><span class="cl">$ yum install supervisor
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># supervisord 部分没有具体需要可以保持不变</span>
</span></span><span class="line"><span class="cl">$ cat /etc/supervisord.conf 
</span></span><span class="line"><span class="cl"><span class="c1"># 这里是具体进程的配置目录</span>
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="o">[</span>include<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">files</span> <span class="o">=</span> supervisord.d/*.ini
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="c1"># 可以看到具体的配置范例</span>
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="o">[</span>program:theprogramname<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">command</span><span class="o">=</span>/bin/cat                        <span class="p">;</span> the program <span class="o">(</span>relative uses PATH, can take args<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">process_name</span><span class="o">=</span>%<span class="o">(</span>program_name<span class="o">)</span>s           <span class="p">;</span> process_name expr <span class="o">(</span>default %<span class="o">(</span>program_name<span class="o">)</span>s<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">numprocs</span><span class="o">=</span><span class="m">1</span>                              <span class="p">;</span> number of processes copies to start <span class="o">(</span>def 1<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">directory</span><span class="o">=</span>/tmp                          <span class="p">;</span> directory to cwd to before <span class="nb">exec</span> <span class="o">(</span>def no cwd<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">umask</span><span class="o">=</span><span class="m">022</span>                               <span class="p">;</span> <span class="nb">umask</span> <span class="k">for</span> process <span class="o">(</span>default None<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">priority</span><span class="o">=</span><span class="m">999</span>                            <span class="p">;</span> the relative start priority <span class="o">(</span>default 999<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">autostart</span><span class="o">=</span><span class="nb">true</span>                          <span class="p">;</span> start at supervisord start <span class="o">(</span>default: <span class="nb">true</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">autorestart</span><span class="o">=</span><span class="nb">true</span>                        <span class="p">;</span> retstart at unexpected quit <span class="o">(</span>default: <span class="nb">true</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">startsecs</span><span class="o">=</span><span class="m">10</span>                            <span class="p">;</span> number of secs prog must stay running <span class="o">(</span>def. 1<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">startretries</span><span class="o">=</span><span class="m">3</span>                          <span class="p">;</span> max of serial start failures <span class="o">(</span>default 3<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">exitcodes</span><span class="o">=</span>0,2                           <span class="p">;</span> <span class="s1">&#39;expected&#39;</span> <span class="nb">exit</span> codes <span class="k">for</span> process <span class="o">(</span>default 0,2<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">stopsignal</span><span class="o">=</span>QUIT                         <span class="p">;</span> signal used to <span class="nb">kill</span> process <span class="o">(</span>default TERM<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">stopwaitsecs</span><span class="o">=</span><span class="m">10</span>                         <span class="p">;</span> max num secs to <span class="nb">wait</span> b4 SIGKILL <span class="o">(</span>default 10<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">user</span><span class="o">=</span>chrism                             <span class="p">;</span> setuid to this UNIX account to run the program
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">redirect_stderr</span><span class="o">=</span><span class="nb">true</span>                    <span class="p">;</span> redirect proc stderr to stdout <span class="o">(</span>default <span class="nb">false</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">stdout_logfile</span><span class="o">=</span>/a/path                  <span class="p">;</span> stdout log path, NONE <span class="k">for</span> none<span class="p">;</span> default AUTO
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">stdout_logfile_maxbytes</span><span class="o">=</span>1MB             <span class="p">;</span> max logfile bytes b4 rotation <span class="o">(</span>default 50MB<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">stdout_logfile_backups</span><span class="o">=</span><span class="m">10</span>               <span class="p">;</span> max of stdout logfile backups <span class="o">(</span>default 10<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">stdout_capture_maxbytes</span><span class="o">=</span>1MB             <span class="p">;</span> number of bytes in <span class="s1">&#39;capturemode&#39;</span> <span class="o">(</span>default 0<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">stdout_events_enabled</span><span class="o">=</span><span class="nb">false</span>             <span class="p">;</span> emit events on stdout writes <span class="o">(</span>default <span class="nb">false</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">stderr_logfile</span><span class="o">=</span>/a/path                  <span class="p">;</span> stderr log path, NONE <span class="k">for</span> none<span class="p">;</span> default AUTO
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">stderr_logfile_maxbytes</span><span class="o">=</span>1MB             <span class="p">;</span> max logfile bytes b4 rotation <span class="o">(</span>default 50MB<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">stderr_logfile_backups</span><span class="o">=</span><span class="m">10</span>               <span class="p">;</span> max of stderr logfile backups <span class="o">(</span>default 10<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">stderr_capture_maxbytes</span><span class="o">=</span>1MB             <span class="p">;</span> number of bytes in <span class="s1">&#39;capturemode&#39;</span> <span class="o">(</span>default 0<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">stderr_events_enabled</span><span class="o">=</span><span class="nb">false</span>             <span class="p">;</span> emit events on stderr writes <span class="o">(</span>default <span class="nb">false</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">environment</span><span class="o">=</span><span class="nv">A</span><span class="o">=</span>1,B<span class="o">=</span><span class="m">2</span>                     <span class="p">;</span> process environment additions <span class="o">(</span>def no adds<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span><span class="nv">serverurl</span><span class="o">=</span>AUTO                          <span class="p">;</span> override serverurl computation <span class="o">(</span>childutils<span class="o">)</span>
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></div><p>以下是其中非常重要的几个配置项：</p>
<ul>
<li>autorestart ：决定进程状态异常后是否会自动重启，这是最重要的值守功能，一般需要开启。</li>
<li>autostart ：决定进程是否跟随 supervisord 启动，一般需要开启，这样启动 supervisord 服务就相当于直接启动我们自定义的程序。</li>
<li>environment ：进程的环境变量配置。</li>
<li>command ：启动时的具体命令，如果是 python 进程，可以使用项目虚拟环境的绝对路径来指明对应的解释器。</li>
<li>directory ：程序的具体工作目录。</li>
</ul>
<p>在安装 supervisor 后，只要写入对应的 ini 文件到 <code>/etc/supervisord.d/</code> 目录中，就可以使用 <code>supervisorctl</code> 启动 ini 文件定义的 program ，或者在定义文件后直接重启整个 supervisord 服务 ，同样可以启动我们需要的 program 。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 定义新的 program 后需要重载</span>
</span></span><span class="line"><span class="cl">$ supervisorctl reload
</span></span><span class="line"><span class="cl"><span class="c1"># 或者直接重启 supervisord</span>
</span></span><span class="line"><span class="cl">$ systemctl reload supervisord
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 supervisorctl 操作具体 program 支持 start/stop/restart 三个动作</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 操作所有 program</span>
</span></span><span class="line"><span class="cl">$ supervisorctl start all
</span></span><span class="line"><span class="cl"><span class="c1"># 操作某个 program 需要使用指明具体名称，这个名称对应 ini 文件中定义的 program:theprogramname</span>
</span></span><span class="line"><span class="cl">$ supervisorctl start theprogramname
</span></span></code></pre></div><h2 id="使用-python-进行-elasticsearch-滚动查询">使用 python 进行 ElasticSearch 滚动查询</h2>
<p>适用于不关心数据顺序，获取索引中所有文档部分所需字段的场景。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># 实现 ElasticSearch 滚动查询，将结果写入 csv</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">requests</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">json</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">csv</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">index</span> <span class="o">=</span> <span class="s1">&#39;index&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;host&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">user</span> <span class="o">=</span> <span class="s1">&#39;user&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;password&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;http://</span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">password</span><span class="si">}</span><span class="s1">@</span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s1">:9200/</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1">/_search?scroll=1m&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 获取符合条件的数据</span>
</span></span><span class="line"><span class="cl"><span class="n">dsl</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;wildcard&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;*abc*&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;sort&#39;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;_doc&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;_source&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 获取全量数据</span>
</span></span><span class="line"><span class="cl"><span class="c1"># dsl = {</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     &#39;size&#39;: 10000,</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     &#39;query&#39;: {</span>
</span></span><span class="line"><span class="cl"><span class="c1">#         &#39;match_all&#39;: {}</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     },</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     &#39;sort&#39;: [</span>
</span></span><span class="line"><span class="cl"><span class="c1">#         &#39;_doc&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     ]</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     &#39;_source&#39;: [&#39;name&#39;, &#39;value&#39;]</span>
</span></span><span class="line"><span class="cl"><span class="c1"># }</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">dsl</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">dicts</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">csvfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;result.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">csvfile</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">dicts</span><span class="p">[</span><span class="s1">&#39;hits&#39;</span><span class="p">][</span><span class="s1">&#39;hits&#39;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="n">each</span><span class="p">[</span><span class="s1">&#39;_source&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">),</span> <span class="n">each</span><span class="p">[</span><span class="s1">&#39;_source&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">scroll_id</span> <span class="o">=</span> <span class="n">dicts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;_scroll_id&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;http://</span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">password</span><span class="si">}</span><span class="s1">@</span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s1">:9200/_search/scroll/&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;scroll&#39;</span><span class="p">:</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;scroll_id&#39;</span><span class="p">:</span> <span class="n">scroll_id</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">dicts</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 滚动结束， hits 数组为空</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="ow">not</span> <span class="n">dicts</span><span class="p">[</span><span class="s1">&#39;hits&#39;</span><span class="p">][</span><span class="s1">&#39;hits&#39;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">dicts</span><span class="p">[</span><span class="s1">&#39;hits&#39;</span><span class="p">][</span><span class="s1">&#39;hits&#39;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="n">each</span><span class="p">[</span><span class="s1">&#39;_source&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">),</span> <span class="n">each</span><span class="p">[</span><span class="s1">&#39;_source&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">csvfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span></code></pre></div><h2 id="中文字符处理">中文字符处理</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># 可用于处理中文文档中段落开头的两个空格</span>
</span></span><span class="line"><span class="cl"><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/path/to/readfile&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">readf</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">strings</span> <span class="o">=</span> <span class="n">readf</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 通过 unicode 替换</span>
</span></span><span class="line"><span class="cl">    <span class="n">trim</span> <span class="o">=</span> <span class="n">strings</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;</span><span class="se">\u3000</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">writef</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/path/to/writefile&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">writef</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">trim</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">writef</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span></code></pre></div><h2 id="使用-python-生成随机密码">使用 python 生成随机密码</h2>
<p>效果类似于执行 Linux 命令 <code>cat /dev/urandom | tr -dc '[:graph:]' | head -c 24; echo</code> 。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">string</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">secrets</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># string.ascii_letters 是大小写字母集合</span>
</span></span><span class="line"><span class="cl"><span class="c1"># string.digits 是数字集合</span>
</span></span><span class="line"><span class="cl"><span class="c1"># string.punctuation 是特殊字符集合</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">alphabet</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">ascii_letters</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">digits</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">punctuation</span>
</span></span><span class="line"><span class="cl"><span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">secrets</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">alphabet</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">24</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 将所有备选字符组合字符集后，使用 secrets.choice 随机选取其中一位，循环多次得到密码</span>
</span></span></code></pre></div><h2 id="使用-python-发送邮件">使用 python 发送邮件</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">smtplib</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">email.message</span> <span class="kn">import</span> <span class="n">EmailMessage</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">username</span> <span class="o">=</span> <span class="s2">&#34;me@email.com&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">password</span> <span class="o">=</span> <span class="s2">&#34;password&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">stmp_address</span> <span class="o">=</span> <span class="s2">&#34;server.email.com&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">stmp_port</span> <span class="o">=</span> <span class="mi">465</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">content</span> <span class="o">=</span> <span class="s2">&#34;email content&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">subject</span> <span class="o">=</span> <span class="s2">&#34;email subject&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">to</span> <span class="o">=</span> <span class="s2">&#34;someone@email.com&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">msg</span> <span class="o">=</span> <span class="n">EmailMessage</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">msg</span><span class="o">.</span><span class="n">set_content</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;Subject&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">subject</span>
</span></span><span class="line"><span class="cl"><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;From&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">username</span>
</span></span><span class="line"><span class="cl"><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;To&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">to</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 根据服务端是否使用加密协议来决定使用哪个函数建立 server 连接</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 25 端口一般需要使用 smtplib.SMTP</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 465 端口一般需要使用 smtplib.SMTP_SSL</span>
</span></span><span class="line"><span class="cl"><span class="k">with</span> <span class="n">smtplib</span><span class="o">.</span><span class="n">SMTP_SSL</span><span class="p">(</span><span class="n">stmp_address</span><span class="p">,</span> <span class="n">stmp_port</span><span class="p">)</span> <span class="k">as</span> <span class="n">server</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">server</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">server</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span></span></code></pre></div></article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='https://yuweizzz.github.io/js/toc.js'></script>
<link rel="stylesheet" href='https://yuweizzz.github.io/css/toc.css' />



  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://yuweizzz.github.io/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://yuweizzz.github.io/js/github-style.js"></script>


<script src="https://cubism.live2d.com/sdk-web/cubismcore/live2dcubismcore.min.js"></script>
<script type="text/javascript" src="https://yuweizzz.github.io/js/CustomLive2D.js"></script>


</html>